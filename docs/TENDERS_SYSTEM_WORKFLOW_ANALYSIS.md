# ØªØ­Ù„ÙŠÙ„ Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ - Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†Ø§ÙØ³Ø§Øª

# Tenders System Workflow Analysis

**Ø§Ù„ØªØ§Ø±ÙŠØ®:** 25 Ø£ÙƒØªÙˆØ¨Ø± 2025  
**Ø§Ù„Ø­Ø§Ù„Ø©:** ğŸ” ØªØ­Ù„ÙŠÙ„ Ù…Ø¹Ù…Ø§Ø±ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©

---

## ğŸ“Š ÙÙ‡Ù… Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©

### Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

```
1. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© (NewTenderForm)
   â”œâ”€â”€ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©
   â”œâ”€â”€ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª (BOQ)
   â”œâ”€â”€ Ø³Ø¹Ø± Ø´Ø±Ø§Ø¡ Ø§Ù„ÙƒØ±Ø§Ø³Ø©
   â””â”€â”€ Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª

2. Ø§Ù„ØªØ³Ø¹ÙŠØ± (TenderPricingPage)
   â”œâ”€â”€ Ø¬Ù„Ø¨ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª
   â”œâ”€â”€ ØªØ³Ø¹ÙŠØ± Ø§Ù„Ø¨Ù†ÙˆØ¯
   â”œâ”€â”€ Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ
   â””â”€â”€ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªØ³Ø¹ÙŠØ±

3. Ø§Ù„ØªÙØ§ØµÙŠÙ„ (TenderDetails)
   â”œâ”€â”€ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
   â”œâ”€â”€ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„Ù…ÙØ³Ø¹Ù‘Ø± (Ù…Ø±Ø¬Ø¹!)
   â”œâ”€â”€ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©
   â”œâ”€â”€ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©
   â””â”€â”€ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª

4. Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (TendersPage)
   â”œâ”€â”€ Ø±ÙØ¹ Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ÙÙ†ÙŠ
   â”œâ”€â”€ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
   â””â”€â”€ Ø¥Ø±Ø³Ø§Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª

5. Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (TenderResults)
   â”œâ”€â”€ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø©
   â”œâ”€â”€ Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ (Ø¥Ø°Ø§ ÙØ§Ø¦Ø²Ø©)
   â””â”€â”€ Ø­ÙØ¸ Ù„Ù„Ø¯Ø±Ø§Ø³Ø© (Ø¥Ø°Ø§ Ø®Ø§Ø³Ø±Ø©)
```

---

## ğŸ” Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­Ø±Ø¬ - Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©

### âš ï¸ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„Ù…ÙƒØªØ´ÙØ©

**Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„Ù…ÙØ³Ø¹Ù‘Ø±** Ù‡Ùˆ **Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ** Ù„Ù„Ù†Ø¸Ø§Ù…!

```typescript
// Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© BOQ (Bill of Quantities):

1. Ø¥Ù†Ø´Ø§Ø¡ BOQ (NewTenderForm)
   â””â”€â”€ BOQItem[] (quantities only)

2. ØªØ³Ø¹ÙŠØ± BOQ (TenderPricingPage)
   â””â”€â”€ BOQItem[] + PricingData (Ù…ÙØ³Ø¹Ù‘Ø±)

3. âœ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªØ³Ø¹ÙŠØ±
   â””â”€â”€ BOQItem[] + PricingData (final - Ù…Ø±Ø¬Ø¹!)

4. Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ ØµÙØ­Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©:
   â”œâ”€â”€ TenderDetails (Ø¹Ø±Ø¶)
   â”œâ”€â”€ Projects (Ù†Ø³Ø® Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
   â”œâ”€â”€ Reports (Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ØŒ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙØŒ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª)
   â”œâ”€â”€ Purchases (Ø³Ø¹Ø± Ø´Ø±Ø§Ø¡ Ø§Ù„ÙƒØ±Ø§Ø³Ø©)
   â””â”€â”€ Analytics (ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±)
```

### ğŸš¨ Ø§Ù„ÙØ¬ÙˆØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

**Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:**

```typescript
âŒ ÙƒÙ„ ØµÙØ­Ø© ØªÙØ­Ù…Ù‘Ù„ BOQ Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ‚Ù„
âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ "Single Source of Truth" Ù„Ù„Ù€ BOQ Ø§Ù„Ù…ÙØ³Ø¹Ù‘Ø±
âŒ Duplication ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ cache Ù„Ù„Ù€ BOQ Ø§Ù„Ù…ÙØ¹ØªÙ…Ø¯
```

**Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**

```typescript
âœ… Centralized BOQ Store (Zustand)
âœ… Single source of truth
âœ… Automatic cache/sync
âœ… Shared across pages
```

---

## ğŸ¯ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª ÙˆØ§Ù„Ù€ Hooks Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### 1. BOQ Management (Ø­Ø±Ø¬ Ø¬Ø¯Ø§Ù‹!)

#### A. useTenderBOQ (Global Hook - NEW!)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹:** `src/application/hooks/useTenderBOQ.ts`

**Ø§Ù„ØºØ±Ø¶:** Ø¥Ø¯Ø§Ø±Ø© Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª Ø¹Ø¨Ø± Ø¬Ù…ÙŠØ¹ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©

```typescript
/**
 * Centralized BOQ Management Hook
 *
 * Ø§Ø³ØªØ®Ø¯Ø§Ù…:
 * - NewTenderForm: Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„ BOQ
 * - TenderPricingPage: Ø¬Ù„Ø¨ + ØªØ³Ø¹ÙŠØ± BOQ
 * - TenderDetails: Ø¹Ø±Ø¶ BOQ Ø§Ù„Ù…ÙØ³Ø¹Ù‘Ø±
 * - Projects: Ù†Ø³Ø® BOQ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹
 * - Reports: Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ/Ø§Ù„Ø£Ø±Ø¨Ø§Ø­
 */
interface UseTenderBOQReturn {
  // Data
  boq: BOQItem[] | null
  pricedBOQ: PricedBOQItem[] | null
  isApproved: boolean

  // Loading States
  isLoading: boolean
  isSaving: boolean

  // Actions
  loadBOQ: (tenderId: string) => Promise<void>
  saveBOQ: (items: BOQItem[]) => Promise<void>
  approveBOQ: (tenderId: string) => Promise<void>

  // Computed
  totalQuantity: number
  totalEstimatedCost: number
  totalPricedCost: number
  profit: number
  profitMargin: number
}

export function useTenderBOQ(tenderId: string): UseTenderBOQReturn {
  // Uses boqStore internally
  // Handles caching, sync, optimistic updates
  // Single source of truth
}
```

**Ø§Ù„ÙØ§Ø¦Ø¯Ø©:**

```diff
+ âœ… Single source Ù„Ù„Ù€ BOQ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙØ­Ø§Øª
+ âœ… Auto-sync Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
+ âœ… Caching (Ù„Ø§ Ù†ÙØ­Ù…Ù‘Ù„ Ù…Ù† DB ÙƒÙ„ Ù…Ø±Ø©)
+ âœ… Optimistic updates
+ âœ… Computed values Ø¬Ø§Ù‡Ø²Ø© (total, profit, etc.)
```

**Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙŠ Ø³ØªØ³ØªØ®Ø¯Ù…Ù‡:**

- âœ… NewTenderForm.tsx (Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„)
- âœ… TenderPricingPage.tsx (ØªØ³Ø¹ÙŠØ±)
- âœ… TenderDetails.tsx (Ø¹Ø±Ø¶)
- âœ… Projects (Ø¹Ù†Ø¯ Ø§Ù„ÙÙˆØ²)
- âœ… Reports/Analytics

---

#### B. boqStore (Zustand Store - NEW!)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹:** `src/stores/boqStore.ts`

```typescript
/**
 * BOQ Store - Ù…Ø®Ø²Ù† Ù…Ø±ÙƒØ²ÙŠ Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª
 */
interface BOQStore {
  // Cache: tenderId â†’ BOQ data
  cache: Map<
    string,
    {
      items: BOQItem[]
      pricedItems: PricedBOQItem[] | null
      isApproved: boolean
      lastUpdated: number
    }
  >

  // Current
  currentTenderId: string | null

  // Actions
  setBOQ: (tenderId: string, items: BOQItem[]) => void
  setPricedBOQ: (tenderId: string, items: PricedBOQItem[]) => void
  approveBOQ: (tenderId: string) => void
  invalidateCache: (tenderId: string) => void

  // Selectors
  getBOQ: (tenderId: string) => BOQItem[] | null
  getPricedBOQ: (tenderId: string) => PricedBOQItem[] | null
  isApproved: (tenderId: string) => boolean
}
```

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸ”¥ **Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹** (Ù‚Ø¨Ù„ ÙƒÙ„ Ø´ÙŠØ¡!)

---

### 2. Financial Calculations (Ù…Ø´ØªØ±Ùƒ!)

#### useFinancialCalculations (Global Hook - NEW!)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹:** `src/application/hooks/useFinancialCalculations.ts`

**Ø§Ù„ØºØ±Ø¶:** Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø§Ù„ÙŠØ© Ù…Ø´ØªØ±ÙƒØ© (Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ØŒ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙØŒ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª)

```typescript
/**
 * Financial Calculations Hook
 *
 * Ø§Ø³ØªØ®Ø¯Ø§Ù…:
 * - TenderDetails: Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­/Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ
 * - TenderPricingPage: Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„ÙÙˆØ±ÙŠØ©
 * - Reports: ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø§Ù„ÙŠØ©
 * - Analytics: ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­
 */
interface UseFinancialCalculationsReturn {
  // Costs
  totalMaterialsCost: number
  totalLaborCost: number
  totalEquipmentCost: number
  totalSubcontractorsCost: number
  totalDirectCost: number

  // Overheads & Profit
  administrativeCost: number
  operationalCost: number
  profitAmount: number

  // Totals
  totalCost: number
  totalPrice: number
  profitMargin: number

  // Breakdown
  costBreakdown: CostBreakdown
  profitBreakdown: ProfitBreakdown
}

export function useFinancialCalculations(
  pricedBOQ: PricedBOQItem[],
  percentages?: PricingPercentages,
): UseFinancialCalculationsReturn {
  // Pure calculations (no state)
  // Memoized (useMemo)
  // Used across multiple pages
}
```

**Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙŠ Ø³ØªØ³ØªØ®Ø¯Ù…Ù‡:**

- âœ… TenderPricingPage.tsx
- âœ… TenderDetails.tsx
- âœ… SummaryView.tsx
- âœ… Reports/Analytics
- âœ… Projects (Ù„Ù„Ù†Ø³Ø®)

---

### 3. Tender Status Management (Ù…Ø´ØªØ±Ùƒ!)

#### useTenderStatus (Global Hook - NEW!)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹:** `src/application/hooks/useTenderStatus.ts`

**Ø§Ù„ØºØ±Ø¶:** Ø¥Ø¯Ø§Ø±Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© Ø¹Ø¨Ø± Ø¯ÙˆØ±Ø© Ø§Ù„Ø­ÙŠØ§Ø©

```typescript
/**
 * Tender Status Management Hook
 *
 * Ø§Ø³ØªØ®Ø¯Ø§Ù…:
 * - TendersPage: ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
 * - TenderDetails: Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø©
 * - Workflows: ØªØªØ¨Ø¹ Ø§Ù„ØªÙ‚Ø¯Ù…
 */
interface UseTenderStatusReturn {
  currentStatus: TenderStatus
  canTransitionTo: (status: TenderStatus) => boolean
  transitionTo: (status: TenderStatus) => Promise<void>

  // Workflow checks
  canStartPricing: boolean
  canSubmit: boolean
  canEnterResult: boolean

  // Status history
  statusHistory: StatusHistoryItem[]

  // Validations
  validateTransition: (to: TenderStatus) => ValidationResult
}

export function useTenderStatus(tenderId: string): UseTenderStatusReturn {
  // Manages tender status lifecycle
  // Validates transitions (draft â†’ pricing â†’ submitted â†’ result)
  // Used across multiple pages
}
```

**Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙŠ Ø³ØªØ³ØªØ®Ø¯Ù…Ù‡:**

- âœ… TendersPage.tsx
- âœ… TenderDetails.tsx
- âœ… TenderStatusManager.tsx
- âœ… TenderResultsManager.tsx

---

### 4. Document/Attachment Management (Ù…Ø´ØªØ±Ùƒ!)

#### useTenderAttachments (Global Hook - NEW!)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹:** `src/application/hooks/useTenderAttachments.ts`

**Ø§Ù„ØºØ±Ø¶:** Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©

```typescript
/**
 * Tender Attachments Management Hook
 *
 * Ø§Ø³ØªØ®Ø¯Ø§Ù…:
 * - NewTenderForm: Ø±ÙØ¹ Ù…Ø±ÙÙ‚Ø§Øª Ø£ÙˆÙ„ÙŠØ©
 * - TenderDetails: Ø±ÙØ¹ Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ÙÙ†ÙŠ
 * - Projects: Ù†Ø³Ø® Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª
 */
interface UseTenderAttachmentsReturn {
  attachments: AttachmentItem[]

  // Actions
  uploadAttachment: (file: File, type: AttachmentType) => Promise<void>
  deleteAttachment: (id: string) => Promise<void>
  downloadAttachment: (id: string) => Promise<void>

  // Filters
  getTechnicalFiles: () => AttachmentItem[]
  getInitialFiles: () => AttachmentItem[]

  // Validation
  canSubmit: boolean // all required attachments uploaded?
}

export function useTenderAttachments(tenderId: string): UseTenderAttachmentsReturn {
  // Centralized attachment management
  // Used across NewTenderForm, TenderDetails
}
```

**Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙŠ Ø³ØªØ³ØªØ®Ø¯Ù…Ù‡:**

- âœ… NewTenderForm.tsx
- âœ… TenderDetails.tsx (AttachmentsTab)
- âœ… TechnicalFilesUpload.tsx

---

### 5. Integration Hooks (Ù„Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø£Ø®Ø±Ù‰)

#### A. usePurchaseIntegration (Global Hook - NEW!)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹:** `src/application/hooks/integrations/usePurchaseIntegration.ts`

```typescript
/**
 * Purchase Department Integration Hook
 *
 * Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© â†’ Ø¥Ø±Ø³Ø§Ù„ Ø³Ø¹Ø± Ø´Ø±Ø§Ø¡ Ø§Ù„ÙƒØ±Ø§Ø³Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª
 */
interface UsePurchaseIntegrationReturn {
  sendPurchaseOrder: (tenderId: string, bookletPrice: number) => Promise<void>

  purchaseOrderStatus: 'pending' | 'sent' | 'confirmed'
}
```

#### B. useProjectIntegration (Global Hook - NEW!)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹:** `src/application/hooks/integrations/useProjectIntegration.ts`

```typescript
/**
 * Projects Department Integration Hook
 *
 * Ø¹Ù†Ø¯ Ø§Ù„ÙÙˆØ² â†’ Ø¥Ø±Ø³Ø§Ù„ ÙƒØ§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹
 */
interface UseProjectIntegrationReturn {
  createProjectFromTender: (tenderId: string) => Promise<void>

  // Copies:
  // - Tender info
  // - Priced BOQ
  // - Attachments
  // - Financial data
}
```

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ù…ÙØ­Ø¯Ù‘Ø«Ø©

### Ø§Ù„Ø·Ø¨Ù‚Ø§Øª (Layers)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI Layer (Pages & Components)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Global Hooks Layer (Shared Business Logic)     â”‚
â”‚  â”œâ”€â”€ useTenderBOQ â­ (Ø£Ù‡Ù… hook!)                â”‚
â”‚  â”œâ”€â”€ useFinancialCalculations                   â”‚
â”‚  â”œâ”€â”€ useTenderStatus                            â”‚
â”‚  â”œâ”€â”€ useTenderAttachments                       â”‚
â”‚  â”œâ”€â”€ useQuantityFormatter                       â”‚
â”‚  â””â”€â”€ integrations/                              â”‚
â”‚      â”œâ”€â”€ usePurchaseIntegration                 â”‚
â”‚      â””â”€â”€ useProjectIntegration                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Stores Layer (Zustand)                         â”‚
â”‚  â”œâ”€â”€ boqStore â­ (Ø¬Ø¯ÙŠØ¯ - Ø­Ø±Ø¬!)                  â”‚
â”‚  â”œâ”€â”€ tenderDetailsStore                         â”‚
â”‚  â”œâ”€â”€ tendersStore                               â”‚
â”‚  â”œâ”€â”€ tenderFormStore                            â”‚
â”‚  â”œâ”€â”€ tenderWizardStore                          â”‚
â”‚  â””â”€â”€ tenderPricingStore                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Repository Layer (Data Access)                 â”‚
â”‚  â”œâ”€â”€ BOQRepository                              â”‚
â”‚  â”œâ”€â”€ TenderRepository                           â”‚
â”‚  â””â”€â”€ AttachmentRepository                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ù…ÙØ­Ø¯Ù‘Ø«Ø© - Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª

### Week -1: BOQ Infrastructure (Ø­Ø±Ø¬!)

**Day -5: boqStore.ts**

```typescript
Priority: ğŸ”¥ğŸ”¥ğŸ”¥ CRITICAL

File: src/stores/boqStore.ts
Size: ~200 LOC

Features:
- BOQ caching
- Priced BOQ storage
- Approval status
- Cache invalidation

Impact: Foundation Ù„ÙƒÙ„ Ø´ÙŠØ¡!
```

**Day -4: useTenderBOQ.ts**

```typescript
Priority: ğŸ”¥ğŸ”¥ğŸ”¥ CRITICAL

File: src/application/hooks/useTenderBOQ.ts
Size: ~150 LOC

Features:
- Load/save BOQ
- Approve BOQ
- Computed totals
- Auto-sync

Used by: 5+ pages
```

**Day -3: useFinancialCalculations.ts**

```typescript
Priority: ğŸ”¥ğŸ”¥ HIGH

File: src/application/hooks/useFinancialCalculations.ts
Size: ~200 LOC

Features:
- Cost calculations
- Profit calculations
- Breakdown reports

Used by: 4+ pages
```

---

### Week 0: Other Stores (ÙƒÙ…Ø§ Ù…Ø®Ø·Ø·)

```
Day -2: tendersStore.ts
Day -1: tenderDetailsStore.ts
Day 0: tenderFormStore.ts
Day 1: tenderWizardStore.ts
```

---

### Week 1+: Decomposition (ÙƒÙ…Ø§ Ù…Ø®Ø·Ø·)

```
Week 1: TenderPricingPage
Week 2: TendersPage + Form
Week 3: Wizard + Testing
```

---

## ğŸ¯ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### 1. BOQTable (Shared Component - NEW!)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹:** `src/presentation/components/shared/BOQTable.tsx`

**Ø§Ù„ØºØ±Ø¶:** Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª (Ù…Ø¹/Ø¨Ø¯ÙˆÙ† Ø£Ø³Ø¹Ø§Ø±)

```typescript
interface BOQTableProps {
  items: BOQItem[] | PricedBOQItem[]
  mode: 'view' | 'edit' | 'pricing'
  showPrices?: boolean
  onItemChange?: (item: BOQItem | PricedBOQItem) => void
  editable?: boolean
}

// Ø§Ø³ØªØ®Ø¯Ø§Ù…:
// - NewTenderForm (edit mode)
// - TenderPricingPage (pricing mode)
// - TenderDetails (view mode)
// - Projects (view mode - copy)
```

**Ø§Ù„ÙØ§Ø¦Ø¯Ø©:**

```diff
+ âœ… Consistent UI across pages
+ âœ… Single component to maintain
+ âœ… Reusable logic (sorting, filtering, etc.)
```

---

### 2. FinancialSummary (Shared Component - NEW!)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹:** `src/presentation/components/shared/FinancialSummary.tsx`

**Ø§Ù„ØºØ±Ø¶:** Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ Ù…Ø§Ù„ÙŠ (ØªÙƒØ§Ù„ÙŠÙØŒ Ø£Ø±Ø¨Ø§Ø­ØŒ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª)

```typescript
interface FinancialSummaryProps {
  calculations: UseFinancialCalculationsReturn
  showBreakdown?: boolean
  variant?: 'compact' | 'detailed'
}

// Ø§Ø³ØªØ®Ø¯Ø§Ù…:
// - TenderPricingPage
// - TenderDetails
// - Reports
```

---

### 3. TenderStatusBadge (Shared Component - EXISTS?)

**Ø§Ù„Ù…ÙˆÙ‚Ø¹:** `src/presentation/components/shared/TenderStatusBadge.tsx`

```typescript
interface TenderStatusBadgeProps {
  status: TenderStatus
  size?: 'sm' | 'md' | 'lg'
  showIcon?: boolean
}

// Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ ÙƒÙ„ Ù…ÙƒØ§Ù†:
// - TendersPage (cards)
// - TenderDetails (header)
// - Lists/Tables
```

---

## ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ - Ù…Ø§ ÙŠØ¬Ø¨ Ø¨Ù†Ø§Ø¦Ù‡ Ø¨Ø´ÙƒÙ„ Ù…Ø®ØªÙ„Ù

### âœ… Global Hooks (ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ø´ØªØ±ÙƒØ©)

```typescript
Priority 1 (Ø­Ø±Ø¬ - Ù‚Ø¨Ù„ ÙƒÙ„ Ø´ÙŠØ¡):
ğŸ”¥ useTenderBOQ (Day -4)
ğŸ”¥ useFinancialCalculations (Day -3)

Priority 2 (Ø¹Ø§Ù„ÙŠ):
â­ useTenderStatus (Day -2)
â­ useTenderAttachments (Day -1)
â­ useQuantityFormatter (Day 1)

Priority 3 (Ù…ØªÙˆØ³Ø·):
ğŸ“Š usePurchaseIntegration (Week 2)
ğŸ“Š useProjectIntegration (Week 2)
```

### âœ… Shared Components

```typescript
Priority 1:
ğŸ”¥ BOQTable (Week 1)
ğŸ”¥ FinancialSummary (Week 1)

Priority 2:
â­ TenderStatusBadge (Week 2)
â­ AttachmentUploader (Week 2)
```

### âœ… Stores

```typescript
Priority 1 (Ø­Ø±Ø¬):
ğŸ”¥ boqStore (Day -5) â† Ø¬Ø¯ÙŠØ¯!

Priority 2 (Ø¹Ø§Ù„ÙŠ):
â­ tenderDetailsStore (Day -2)
â­ tendersStore (Day -1)
â­ tenderFormStore (Day 0)
â­ tenderWizardStore (Day 1)
â­ tenderPricingStore (Ù…ÙˆØ¬ÙˆØ¯ âœ…)
```

---

## ğŸš¨ Ø§Ù„ÙØ¬ÙˆØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø© Ø§Ù„Ù…ÙƒØªØ´ÙØ©

### 1. BOQ Management (Ø§Ù„Ø£Ù‡Ù…!)

```diff
! Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:
  âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ²ÙŠØ© Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª
  âŒ ÙƒÙ„ ØµÙØ­Ø© ØªÙØ­Ù…Ù‘Ù„ BOQ Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ‚Ù„
  âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ cache
  âŒ Duplication ÙÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©

! Ø§Ù„Ø­Ù„:
  âœ… boqStore (Zustand)
  âœ… useTenderBOQ (Global Hook)
  âœ… useFinancialCalculations (Global Hook)
  âœ… BOQTable (Shared Component)
```

### 2. Integration Points

```diff
! Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:
  âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ hooks Ù„Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹:
     - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª
     - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹

! Ø§Ù„Ø­Ù„:
  âœ… usePurchaseIntegration
  âœ… useProjectIntegration
```

### 3. Status Management

```diff
! Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:
  âŒ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ù†ØªØ´Ø± ÙÙŠ Ø£Ù…Ø§ÙƒÙ† Ù…ØªØ¹Ø¯Ø¯Ø©
  âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ validation Ù„Ù„Ù€ transitions

! Ø§Ù„Ø­Ù„:
  âœ… useTenderStatus (centralized)
  âœ… Status workflow validation
```

---

## ğŸ“… Timeline Ø§Ù„Ù…ÙØ­Ø¯Ù‘Ø« Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ

### Week -1: BOQ Infrastructure (5 Ø£ÙŠØ§Ù… - **Ø¬Ø¯ÙŠØ¯!**)

```
Day -5: boqStore.ts (CRITICAL)
Day -4: useTenderBOQ.ts (CRITICAL)
Day -3: useFinancialCalculations.ts (HIGH)
Day -2: useTenderStatus.ts (HIGH)
Day -1: useTenderAttachments.ts (HIGH)
```

### Week 0: Other Stores (4 Ø£ÙŠØ§Ù…)

```
Day 0: tenderDetailsStore.ts
Day 1: tendersStore.ts
Day 2: tenderFormStore.ts
Day 3: tenderWizardStore.ts
```

### Week 1-3: Decomposition (17 Ø£ÙŠØ§Ù…)

```
Week 1: TenderPricingPage + Shared Components
Week 2: TendersPage + NewTenderForm + Integrations
Week 3: Wizard + Testing
```

**Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 26 ÙŠÙˆÙ… (~5 Ø£Ø³Ø§Ø¨ÙŠØ¹)**

---

## âœ… Ø§Ù„Ø®Ù„Ø§ØµØ© - Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„Ùƒ

### Ù†Ø¹Ù…! ÙŠÙˆØ¬Ø¯ Ù…ÙƒÙˆÙ†Ø§Øª ÙˆÙ‡ÙˆÙƒØ§Øª ÙŠØ¬Ø¨ Ø¨Ù†Ø§Ø¦Ù‡Ø§ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø®ØªÙ„ÙØ©:

#### ğŸ”¥ Global Hooks (Ø­Ø±Ø¬):

```typescript
1. useTenderBOQ â­â­â­
   - Ø£Ù‡Ù… hook ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…!
   - ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ 5+ ØµÙØ­Ø§Øª
   - Single source Ù„Ù„Ù€ BOQ

2. useFinancialCalculations â­â­â­
   - Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø§Ù„ÙŠØ© Ù…Ø´ØªØ±ÙƒØ©
   - ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ 4+ ØµÙØ­Ø§Øª

3. useTenderStatus â­â­
   - Ø¥Ø¯Ø§Ø±Ø© Ø¯ÙˆØ±Ø© Ø§Ù„Ø­ÙŠØ§Ø©
   - ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ 3+ ØµÙØ­Ø§Øª

4. useTenderAttachments â­â­
   - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª
   - ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ 2+ ØµÙØ­Ø§Øª

5. useQuantityFormatter â­
   - ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙƒÙ…ÙŠØ§Øª
   - ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ 5+ Ù…Ù„ÙØ§Øª
```

#### ğŸ”¥ Shared Components:

```typescript
1. BOQTable â­â­â­
   - Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª
   - 3+ modes (view, edit, pricing)
   - ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ 4+ ØµÙØ­Ø§Øª

2. FinancialSummary â­â­
   - Ù…Ù„Ø®Øµ Ù…Ø§Ù„ÙŠ
   - ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ 3+ ØµÙØ­Ø§Øª
```

#### ğŸ”¥ Stores:

```typescript
1. boqStore â­â­â­ (Ø¬Ø¯ÙŠØ¯ - Ø­Ø±Ø¬!)
   - Cache Ù„Ù„Ù€ BOQ
   - Single source of truth
```

---

**Ø§Ù„ØªÙˆØµÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:**

âœ… **Ø§Ø¨Ø¯Ø£ Ø¨Ù€ Week -1** (BOQ Infrastructure)  
âœ… **Ø«Ù… Week 0** (Other Stores)  
âœ… **Ø«Ù… Week 1-3** (Decomposition)

**Ø§Ù„Ø³Ø¨Ø¨:**

- useTenderBOQ Ùˆ boqStore Ù‡Ù…Ø§ **Ø§Ù„Ø£Ø³Ø§Ø³** Ù„Ù„Ù†Ø¸Ø§Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
- ÙŠØ¬Ø¨ Ø¨Ù†Ø§Ø¤Ù‡Ù…Ø§ **Ù‚Ø¨Ù„** Ø£ÙŠ ØªÙÙƒÙŠÙƒ
- ÙƒÙ„ Ø§Ù„ØµÙØ­Ø§Øª ØªØ¹ØªÙ…Ø¯ Ø¹Ù„ÙŠÙ‡Ù…Ø§

---

**Ø§Ù„ØªØ§Ø±ÙŠØ®:** 2025-10-25  
**Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… ØªØ­Ù„ÙŠÙ„ ÙƒØ§Ù…Ù„ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©  
**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** Week -1 (BOQ Infrastructure) - **Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†!**
